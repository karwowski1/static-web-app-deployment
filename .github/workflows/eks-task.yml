name: "Deploy EKS"

on:
  push:
    branches: ['**']
    paths:
      - '17-eks-task-pt3/envs/dev/**'
      - '17-eks-task-pt3/modules/**'

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    uses: ./.github/workflows/reusable.yml
    with:
      working-directory: "17-eks-task-pt3/envs/dev"
      aws-region: "eu-central-1"
      aws-role-plan: "arn:aws:iam::858986858999:role/GitHubActions-Plan-EKS-Native"
      aws-role-apply: "arn:aws:iam::858986858999:role/GitHubActions-Apply-EKS-Native"